\doxysection{src/api/\+Ble\+Protocol.js File Reference}
\hypertarget{_ble_protocol_8js}{}\label{_ble_protocol_8js}\index{src/api/BleProtocol.js@{src/api/BleProtocol.js}}


Contains BLE Protocol definitions, Command IDs, and Packet Parsing logic.  


\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{_ble_protocol_8js_a59be084da8908b7d77ff34b25cd84488}{import}} \{ Buffer \} from \textquotesingle{}buffer\textquotesingle{}
\item 
export const \mbox{\hyperlink{_ble_protocol_8js_aaa9370ecf93092946eab9785db4130ad}{SENSOR\+\_\+\+UUIDS}}
\begin{DoxyCompactList}\small\item\em UUIDs for the Medical Sensor. \end{DoxyCompactList}\item 
export const \mbox{\hyperlink{_ble_protocol_8js_abc27c9cc8340665795da2ecca7e02241}{COMMANDS}}
\item 
export const \mbox{\hyperlink{_ble_protocol_8js_afdf6cb6c172056ebcedb95358dde10ef}{SYS\+\_\+\+MODES}}
\begin{DoxyCompactList}\small\item\em Modes for CMD\+\_\+\+SYS\+\_\+\+SETTING\+\_\+\+SET. \end{DoxyCompactList}\item 
export const \mbox{\hyperlink{_ble_protocol_8js_a5d42c2f603df43380cc8ec242a55d4e1}{build\+Sys\+Setting\+Cmd}}
\begin{DoxyCompactList}\small\item\em Constructs the payload for CMD\+\_\+\+SYS\+\_\+\+SETTING\+\_\+\+SET. \end{DoxyCompactList}\item 
export const \mbox{\hyperlink{_ble_protocol_8js_afde1b1380963e8b37fd1b05cebae9d7b}{build\+Simple\+Cmd}}
\begin{DoxyCompactList}\small\item\em Constructs a simple 1-\/byte command. \end{DoxyCompactList}\item 
export const \mbox{\hyperlink{_ble_protocol_8js_af6879cd2fe3d7951ea64f81be0b7617e}{parse\+Notification}}
\begin{DoxyCompactList}\small\item\em Parses the raw notification packet from the sensor. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Contains BLE Protocol definitions, Command IDs, and Packet Parsing logic. 



Definition in file \mbox{\hyperlink{_ble_protocol_8js_source}{Ble\+Protocol.\+js}}.



\label{doc-var-members}
\Hypertarget{_ble_protocol_8js_doc-var-members}
\doxysubsection{Variable Documentation}
\Hypertarget{_ble_protocol_8js_afde1b1380963e8b37fd1b05cebae9d7b}\index{BleProtocol.js@{BleProtocol.js}!buildSimpleCmd@{buildSimpleCmd}}
\index{buildSimpleCmd@{buildSimpleCmd}!BleProtocol.js@{BleProtocol.js}}
\doxysubsubsection{\texorpdfstring{buildSimpleCmd}{buildSimpleCmd}}
{\footnotesize\ttfamily \label{_ble_protocol_8js_afde1b1380963e8b37fd1b05cebae9d7b} 
export const build\+Simple\+Cmd}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ (cmdId)\ =>\ \{}
\DoxyCodeLine{\ \ \textcolor{keyword}{const}\ buffer\ =\ Buffer.alloc(1);}
\DoxyCodeLine{\ \ buffer.writeUInt8(cmdId,\ 0);}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{return}\ buffer.toString(\textcolor{stringliteral}{'base64'});}
\DoxyCodeLine{\}}

\end{DoxyCode}


Constructs a simple 1-\/byte command. 


\begin{DoxyParams}{Parameters}
{\em \{number\}} & cmd\+Id -\/ The command ID. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\{string\} Base64 encoded string. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_ble_protocol_8js_source_l00058}{58}} of file \mbox{\hyperlink{_ble_protocol_8js_source}{Ble\+Protocol.\+js}}.

\Hypertarget{_ble_protocol_8js_a5d42c2f603df43380cc8ec242a55d4e1}\index{BleProtocol.js@{BleProtocol.js}!buildSysSettingCmd@{buildSysSettingCmd}}
\index{buildSysSettingCmd@{buildSysSettingCmd}!BleProtocol.js@{BleProtocol.js}}
\doxysubsubsection{\texorpdfstring{buildSysSettingCmd}{buildSysSettingCmd}}
{\footnotesize\ttfamily \label{_ble_protocol_8js_a5d42c2f603df43380cc8ec242a55d4e1} 
export const build\+Sys\+Setting\+Cmd}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ (mode,\ freq)\ =>\ \{}
\DoxyCodeLine{\ \ \textcolor{keyword}{const}\ buffer\ =\ Buffer.alloc(3);}
\DoxyCodeLine{\ \ buffer.writeUInt8(\mbox{\hyperlink{_ble_protocol_8js_abc27c9cc8340665795da2ecca7e02241}{COMMANDS}}.CMD\_SYS\_SETTING\_SET,\ 0);}
\DoxyCodeLine{\ \ buffer.writeUInt8(mode,\ 1);}
\DoxyCodeLine{\ \ buffer.writeUInt8(freq,\ 2);}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{return}\ buffer.toString(\textcolor{stringliteral}{'base64'});}
\DoxyCodeLine{\}}

\end{DoxyCode}


Constructs the payload for CMD\+\_\+\+SYS\+\_\+\+SETTING\+\_\+\+SET. 


\begin{DoxyParams}{Parameters}
{\em \{number\}} & mode -\/ The result mode (e.\+g., 0x32). \\
\hline
{\em \{number\}} & freq -\/ The transmit frequency (e.\+g., 200). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\{string\} Base64 encoded string for BLE transmission. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_ble_protocol_8js_source_l00045}{45}} of file \mbox{\hyperlink{_ble_protocol_8js_source}{Ble\+Protocol.\+js}}.

\Hypertarget{_ble_protocol_8js_abc27c9cc8340665795da2ecca7e02241}\index{BleProtocol.js@{BleProtocol.js}!COMMANDS@{COMMANDS}}
\index{COMMANDS@{COMMANDS}!BleProtocol.js@{BleProtocol.js}}
\doxysubsubsection{\texorpdfstring{COMMANDS}{COMMANDS}}
{\footnotesize\ttfamily \label{_ble_protocol_8js_abc27c9cc8340665795da2ecca7e02241} 
export const COMMANDS}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ \{}
\DoxyCodeLine{\ \ CMD\_SYS\_PARAM\_READ:\ 0x01,\ \ \ \ \ }
\DoxyCodeLine{\ \ CMD\_SYS\_SETTING\_SET:\ 0x08,\ \ \ \ }
\DoxyCodeLine{\ \ CMD\_SCAN\_START:\ 0x18,\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\ \ CMD\_SCAN\_STOP:\ 0x1F,\ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\ \ RES\_SYS\_UNSOLICITED:\ 0x8E\ \ \ \ \ }
\DoxyCodeLine{\}}

\end{DoxyCode}


Definition at line \mbox{\hyperlink{_ble_protocol_8js_source_l00022}{22}} of file \mbox{\hyperlink{_ble_protocol_8js_source}{Ble\+Protocol.\+js}}.

\Hypertarget{_ble_protocol_8js_a59be084da8908b7d77ff34b25cd84488}\index{BleProtocol.js@{BleProtocol.js}!import@{import}}
\index{import@{import}!BleProtocol.js@{BleProtocol.js}}
\doxysubsubsection{\texorpdfstring{import}{import}}
{\footnotesize\ttfamily \label{_ble_protocol_8js_a59be084da8908b7d77ff34b25cd84488} 
import \{ Buffer \} from \textquotesingle{}buffer\textquotesingle{}}



Definition at line \mbox{\hyperlink{_ble_protocol_8js_source_l00006}{6}} of file \mbox{\hyperlink{_ble_protocol_8js_source}{Ble\+Protocol.\+js}}.

\Hypertarget{_ble_protocol_8js_af6879cd2fe3d7951ea64f81be0b7617e}\index{BleProtocol.js@{BleProtocol.js}!parseNotification@{parseNotification}}
\index{parseNotification@{parseNotification}!BleProtocol.js@{BleProtocol.js}}
\doxysubsubsection{\texorpdfstring{parseNotification}{parseNotification}}
{\footnotesize\ttfamily \label{_ble_protocol_8js_af6879cd2fe3d7951ea64f81be0b7617e} 
export const parse\+Notification}



Parses the raw notification packet from the sensor. 

Extracts 2 sets of (PPG IR, PPG RED, ECG). Data format\+: MSB First (Big Endian), 16-\/bit values. 
\begin{DoxyParams}{Parameters}
{\em \{string\}} & base64\+Data -\/ The raw Base64 data from BLE. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\{Array$<$\+Object$>$\texorpdfstring{$\vert$}{|}null\} Array of 2 data points or null if invalid. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_ble_protocol_8js_source_l00071}{71}} of file \mbox{\hyperlink{_ble_protocol_8js_source}{Ble\+Protocol.\+js}}.

\Hypertarget{_ble_protocol_8js_aaa9370ecf93092946eab9785db4130ad}\index{BleProtocol.js@{BleProtocol.js}!SENSOR\_UUIDS@{SENSOR\_UUIDS}}
\index{SENSOR\_UUIDS@{SENSOR\_UUIDS}!BleProtocol.js@{BleProtocol.js}}
\doxysubsubsection{\texorpdfstring{SENSOR\_UUIDS}{SENSOR\_UUIDS}}
{\footnotesize\ttfamily \label{_ble_protocol_8js_aaa9370ecf93092946eab9785db4130ad} 
export const SENSOR\+\_\+\+UUIDS}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ \{}
\DoxyCodeLine{\ \ SERVICE:\ \textcolor{stringliteral}{"{}0000180D-\/0000-\/1000-\/8000-\/00805F9B34FB"{}},\ }
\DoxyCodeLine{\ \ WRITE\_CHAR:\ \textcolor{stringliteral}{"{}00002A37-\/0000-\/1000-\/8000-\/00805F9B34FB"{}},\ }
\DoxyCodeLine{\ \ NOTIFY\_CHAR:\ \textcolor{stringliteral}{"{}00002A38-\/0000-\/1000-\/8000-\/00805F9B34FB"{}},\ }
\DoxyCodeLine{\}}

\end{DoxyCode}


UUIDs for the Medical Sensor. 

\begin{DoxyNote}{Note}
These must be replaced with the actual UUIDs found during scanning or provided by the vendor. 
\end{DoxyNote}


Definition at line \mbox{\hyperlink{_ble_protocol_8js_source_l00012}{12}} of file \mbox{\hyperlink{_ble_protocol_8js_source}{Ble\+Protocol.\+js}}.

\Hypertarget{_ble_protocol_8js_afdf6cb6c172056ebcedb95358dde10ef}\index{BleProtocol.js@{BleProtocol.js}!SYS\_MODES@{SYS\_MODES}}
\index{SYS\_MODES@{SYS\_MODES}!BleProtocol.js@{BleProtocol.js}}
\doxysubsubsection{\texorpdfstring{SYS\_MODES}{SYS\_MODES}}
{\footnotesize\ttfamily \label{_ble_protocol_8js_afdf6cb6c172056ebcedb95358dde10ef} 
export const SYS\+\_\+\+MODES}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ \{}
\DoxyCodeLine{\ \ RESULT\_ONLY:\ 0x31,}
\DoxyCodeLine{\ \ RAW\_ONLY:\ 0x32,}
\DoxyCodeLine{\ \ BOTH:\ 0x33}
\DoxyCodeLine{\}}

\end{DoxyCode}


Modes for CMD\+\_\+\+SYS\+\_\+\+SETTING\+\_\+\+SET. 



Definition at line \mbox{\hyperlink{_ble_protocol_8js_source_l00033}{33}} of file \mbox{\hyperlink{_ble_protocol_8js_source}{Ble\+Protocol.\+js}}.

